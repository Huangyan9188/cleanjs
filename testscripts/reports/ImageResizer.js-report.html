<!DOCTYPE html>
	<html lang="en">
		<head>
			<meta charset="utf-8">
		    <title>cleanjs report for file testscripts/ImageResizer.js</title>
			<style type="text/css">
				body {
					margin: 0;
					padding: 1em;
					font-size: 12px;
					font-family: verdana;
					overflow-x: hidden;
					width: 100%;
					color: #444;
				}
				h1 {
					margin: 0;
					padding: 1em 1em 1em 25px;
				}
				.general {
					padding: 0;
					margin: 0 0 30px 30px;
					list-style-type: none;
					width: 500px;
					color: #222;
				}
				.lines {
					padding: 0;
					margin: 0;
					list-style-type: none;
					width: 10000px;
				}
				.lines .line {
					overflow: hidden;
					padding: 0;
					margin: 0;
					list-style-type: none;
				}
				.lines .line .gutter {
					float: left;
					text-align: right;
					width: 25px;
					padding: 4px 5px 4px 0;
					color: #aaa;
					font-size: 11px;
				}
				.lines .nomessage .gutter {
					color: #ddd;
				}
				.lines .line .messages {
					float: left;
					padding: 0;
					margin: 0;
					list-style-type: none;
					width: 500px;
				}
				.lines .line .messages li, .general li {
					padding: 4px 1em;
					line-height: 13px;
				}
				.lines .line .code {
					float :left;
					margin: 0;
					padding: 0 1em;
					font-family: Menlo, Monaco, Consolas, "Lucida Console", monospace;
					font-size: 11px;
				}
				.error, .info, .warning {
					border-left: 4px solid #3e93bf;
					background: #eee;
				}
				.warning {
					border-color: #f5931f;
				}
				.error {
					font-weight: bold;
					border-color: #d83e0f;
				}
			</style>
		</head>
		<body>
			<h1>testscripts/ImageResizer.js | grade F</h1><ul class='general'><li class='info'>File is 61 lines long</li><li class='info'>12 lines of comments</li><li class='info'>48 lines of code</li><li class='info'>1 empty lines</li><li class='info'>There are 4 functions in the file</li><li class='info'>Longest function is 14 lines long, and shortest one is 4 (average is 9)</li><li class='error'>It seems you haven't properly formatted your file. Make sure you have configured a proper formatter</li></ul><ul class='lines'><li class='line nomessage'><span class='gutter'>1</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>if(!malica) {</pre></li><li class='line nomessage'><span class='gutter'>2</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	var malica = {};</pre></li><li class='line nomessage'><span class='gutter'>3</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>}</pre></li><li class='line nomessage'><span class='gutter'>4</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>5</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>/**</pre></li><li class='line nomessage'><span class='gutter'>6</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'> * The ImageResizer takes in a list of images (jquery selected) and a max dimension</pre></li><li class='line nomessage'><span class='gutter'>7</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'> * and resizes them if needed to the max dim</pre></li><li class='line nomessage'><span class='gutter'>8</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'> * !! Images must be visibility hidden in the page for this to work</pre></li><li class='line nomessage'><span class='gutter'>9</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'> */</pre></li><li class='line nomessage'><span class='gutter'>10</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>malica.ImageResizer = function($images) {</pre></li><li class='line nomessage'><span class='gutter'>11</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	this._$images = $images;</pre></li><li class='line nomessage'><span class='gutter'>12</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>};</pre></li><li class='line nomessage'><span class='gutter'>13</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>/**</pre></li><li class='line nomessage'><span class='gutter'>14</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'> * Will resize the set of images while they are loading by making sure they are really</pre></li><li class='line nomessage'><span class='gutter'>15</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'> * done loading and then checking their sizes.</pre></li><li class='line nomessage'><span class='gutter'>16</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'> * !! Images must be visibility hidden in the page for this to work</pre></li><li class='line nomessage'><span class='gutter'>17</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'> */</pre></li><li class='line nomessage'><span class='gutter'>18</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>malica.ImageResizer.prototype.resizeOnPageLoad = function(maxDim, noResizeIfSmaller) {</pre></li><li class='line nomessage'><span class='gutter'>19</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	var self = this;</pre></li><li class='line nomessage'><span class='gutter'>20</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	this._$images.each(function() {</pre></li><li class='line nomessage'><span class='gutter'>21</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		var photo = this;</pre></li><li class='line'><span class='gutter'>22</span><ul class='messages'><li class='error'>The name of variable img is too short</li></ul><pre class='code'>		var img = new Image();</pre></li><li class='line nomessage'><span class='gutter'>23</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		img.addEventListener(&apos;load&apos;, function() {</pre></li><li class='line nomessage'><span class='gutter'>24</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>			photo._size = {</pre></li><li class='line nomessage'><span class='gutter'>25</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>				w: photo.width,</pre></li><li class='line nomessage'><span class='gutter'>26</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>				h: photo.height</pre></li><li class='line nomessage'><span class='gutter'>27</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>			};</pre></li><li class='line'><span class='gutter'>28</span><ul class='messages'><li class='warning'>It seems this comment is very similar to the code directly beneath it. Don't you think you can get rid of it?</li></ul><pre class='code'>			// Resize a photo to the max dim but not if smaller</pre></li><li class='line nomessage'><span class='gutter'>29</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>			self._resizeAPhoto(photo, maxDim, noResizeIfSmaller);</pre></li><li class='line nomessage'><span class='gutter'>30</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		}, false);</pre></li><li class='line nomessage'><span class='gutter'>31</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		img.src = photo.src;</pre></li><li class='line nomessage'><span class='gutter'>32</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	});	</pre></li><li class='line nomessage'><span class='gutter'>33</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>};</pre></li><li class='line nomessage'><span class='gutter'>34</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>malica.ImageResizer.prototype.resizeAgain = function(maxDim, noResizeIfSmaller) {</pre></li><li class='line nomessage'><span class='gutter'>35</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	var self = this;</pre></li><li class='line nomessage'><span class='gutter'>36</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	this._$images.each(function() {</pre></li><li class='line nomessage'><span class='gutter'>37</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		self._resizeAPhoto(this, maxDim, noResizeIfSmaller);</pre></li><li class='line nomessage'><span class='gutter'>38</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	});</pre></li><li class='line nomessage'><span class='gutter'>39</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>};</pre></li><li class='line nomessage'><span class='gutter'>40</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>malica.ImageResizer.prototype._resizeAPhoto = function(photo, maxDim, noResizeIfSmaller) {</pre></li><li class='line nomessage'><span class='gutter'>41</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	if(photo._size.w &lt; 50 &amp;&amp; photo._size.h &lt; 50) {</pre></li><li class='line nomessage'><span class='gutter'>42</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		photo.style.display = &quot;none&quot;;</pre></li><li class='line nomessage'><span class='gutter'>43</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	} else if(photo._size.w &gt; 1000 || photo._size.h &gt; 1000) {</pre></li><li class='line nomessage'><span class='gutter'>44</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		photo.style.display = &quot;none&quot;;</pre></li><li class='line nomessage'><span class='gutter'>45</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	} else {</pre></li><li class='line'><span class='gutter'>46</span><ul class='messages'><li class='warning'>Found an IF statement with more than 1 AND or OR! Could you extract this in a function like isABC()?</li></ul><pre class='code'>		if(noResizeIfSmaller &amp;&amp; photo._size.w &lt; maxDim &amp;&amp; photo._size.h &lt; maxDim) {</pre></li><li class='line nomessage'><span class='gutter'>47</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>			photo.style.visibility = &quot;visible&quot;;</pre></li><li class='line nomessage'><span class='gutter'>48</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		} else {</pre></li><li class='line nomessage'><span class='gutter'>49</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>			malica.ImageResizer.resize(photo, photo._size.w, photo._size.h, maxDim);</pre></li><li class='line nomessage'><span class='gutter'>50</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>			photo.style.visibility = &quot;visible&quot;;</pre></li><li class='line nomessage'><span class='gutter'>51</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		}</pre></li><li class='line nomessage'><span class='gutter'>52</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	}</pre></li><li class='line nomessage'><span class='gutter'>53</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>};</pre></li><li class='line'><span class='gutter'>54</span><ul class='messages'><li class='error'>Name w doesn't mean anything</li><li class='error'>Name h doesn't mean anything</li></ul><pre class='code'>malica.ImageResizer.resize = function(photo, originalW, originalH, maxDim) {</pre></li><li class='line nomessage'><span class='gutter'>55</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	//photo.height = photo.width = null;</pre></li><li class='line nomessage'><span class='gutter'>56</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	if(originalW &gt; originalH) {</pre></li><li class='line nomessage'><span class='gutter'>57</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		photo.width = maxDim;</pre></li><li class='line nomessage'><span class='gutter'>58</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	} else {</pre></li><li class='line nomessage'><span class='gutter'>59</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		photo.height = maxDim;</pre></li><li class='line nomessage'><span class='gutter'>60</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	}</pre></li><li class='line nomessage'><span class='gutter'>61</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>};</pre></li></ul></body></html>