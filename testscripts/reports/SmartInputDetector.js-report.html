<!DOCTYPE html>
	<html lang="en">
		<head>
			<meta charset="utf-8">
		    <title>cleanjs report for file testscripts/SmartInputDetector.js</title>
			<style type="text/css">
				body {
					margin: 0;
					padding: 1em;
					font-size: 14px;
					font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif;
					overflow-x: hidden;
					width: 100%;
				}
				h1 {
					margin: 0;
					padding: 1em 1em 1em 25px;
				}
				.general {
					padding: 0;
					margin: 0 0 0 30px;
					list-style-type: none;
					width: 500px;
					padding: 1em;
					background: #eee;
					border-right: 1px solid #ccc;
					border-left: 1px solid #ccc;
					color: #333;
				}
				.general li {
					padding-bottom: 5px;
				}
				.lines {
					padding: 0;
					margin: 0;
					list-style-type: none;
					width: 10000px;
				}
				.lines .line {
					overflow: hidden;
					padding: 0;
					margin: 0;
					list-style-type: none;
				}
				.lines .line .gutter {
					float: left;
					text-align: right;
					width: 25px;
					padding-right: 5px;
					color: #aaa;
					font-family: Menlo, Monaco, Consolas, "Lucida Console", monospace;
					font-size: 11px;
				}
				.lines .line .messages {
					float: left;
					padding: 0 1em;
					margin: 0;
					list-style-type: none;
					width: 500px;
					border-right: 1px solid #ccc;
					border-left: 1px solid #ccc;
					background: #eee;
					color: #333;
				}
				.lines .line .messages li {
					padding-bottom: 8px;
					line-height: 13px;
				}
				.lines .line .code {
					float :left;
					margin: 0;
					padding: 0 1em;
					font-family: Menlo, Monaco, Consolas, "Lucida Console", monospace;
					font-size: 11px;
				}
				.error {
					color: #954121;
					color: red;
				}
				.info {
					
				}
				.warning {
					color: #B62;
				}
			</style>
		</head>
		<body>
			<h1>testscripts/SmartInputDetector.js</h1><ul class='general'><li class='info'>File is 67 lines long</li><li class='info'>32 lines of comments</li><li class='info'>26 lines of code</li><li class='info'>5 empty lines</li><li class='info'>There are 2 functions in the file</li><li class='info'>Longest function is 12 lines long, and shortest one is 7 (average is 9)</li><li class='error'>It seems you haven't properly formatted your file. Make sure you have configured a proper formatter</li></ul><ul class='lines'><li class='line'><span class='gutter'>1</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>if(!malica) {</pre></li><li class='line'><span class='gutter'>2</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	var malica = {};</pre></li><li class='line'><span class='gutter'>3</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>}</pre></li><li class='line'><span class='gutter'>4</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>5</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>/**</pre></li><li class='line'><span class='gutter'>6</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'> * The SmartInputDetector is really not that smart in fact for now</pre></li><li class='line'><span class='gutter'>7</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'> * It can only detect whether what is passed matches a URL to add a present or if it is just a piece of text description</pre></li><li class='line'><span class='gutter'>8</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'> */</pre></li><li class='line'><span class='gutter'>9</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>malica.SmartInputDetector = {</pre></li><li class='line'><span class='gutter'>10</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	/**</pre></li><li class='line'><span class='gutter'>11</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	 * @param {String} inputText The text as typed by the user, which we want to detect from</pre></li><li class='line'><span class='gutter'>12</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	 * @return {Object} Returns an object with 2 properties: url and description,</pre></li><li class='line'><span class='gutter'>13</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	 * depending on what we could parse, only one, both or none of them cna be defined</pre></li><li class='line'><span class='gutter'>14</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	 */</pre></li><li class='line'><span class='gutter'>15</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	detect: function(inputText) {</pre></li><li class='line'><span class='gutter'>16</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		var result = {</pre></li><li class='line'><span class='gutter'>17</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>			url: null,</pre></li><li class='line'><span class='gutter'>18</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>			description: inputText</pre></li><li class='line'><span class='gutter'>19</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		};</pre></li><li class='line'><span class='gutter'>20</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		</pre></li><li class='line'><span class='gutter'>21</span><ul class='messages'><li class='error'>Word s doesn't mean anything</li><li class='error'>Word z doesn't mean anything</li></ul><pre class='code'>		result = this._checkForUrlPatternAndUpdateObject(inputText, /http[s]*:\/\/[a-zA-Z0-9-\.\?=\/&amp;_]+/igm, result)</pre></li><li class='line'><span class='gutter'>22</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		if(!result.url) {</pre></li><li class='line'><span class='gutter'>23</span><ul class='messages'><li class='error'>Word www doesn't mean anything</li><li class='error'>Word z doesn't mean anything</li></ul><pre class='code'>			result = this._checkForUrlPatternAndUpdateObject(inputText, /www[a-zA-Z0-9-\.\?=\/&amp;_]+/igm, result)</pre></li><li class='line'><span class='gutter'>24</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>			if(result.url) {</pre></li><li class='line'><span class='gutter'>25</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>				result.url = &quot;http://&quot; + result.url;</pre></li><li class='line'><span class='gutter'>26</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>			}</pre></li><li class='line'><span class='gutter'>27</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		}</pre></li><li class='line'><span class='gutter'>28</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		</pre></li><li class='line'><span class='gutter'>29</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		return result;</pre></li><li class='line'><span class='gutter'>30</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	},</pre></li><li class='line'><span class='gutter'>31</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	</pre></li><li class='line'><span class='gutter'>32</span><ul class='messages'><li class='warning'>The name of function _checkForUrlPatternAndUpdateObject is more than 30 characters (34). This may make it harder to read</li></ul><pre class='code'>	_checkForUrlPatternAndUpdateObject: function(inputText, pattern, result) {</pre></li><li class='line'><span class='gutter'>33</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		var matches = inputText.match(pattern);</pre></li><li class='line'><span class='gutter'>34</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		if(matches) {</pre></li><li class='line'><span class='gutter'>35</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>			// Only take first one for now</pre></li><li class='line'><span class='gutter'>36</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>			result.url = matches[0];</pre></li><li class='line'><span class='gutter'>37</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>			result.description = result.description.replace(result.url, &quot;&quot;)</pre></li><li class='line'><span class='gutter'>38</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		}</pre></li><li class='line'><span class='gutter'>39</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>		return result;</pre></li><li class='line'><span class='gutter'>40</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>	}</pre></li><li class='line'><span class='gutter'>41</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>};</pre></li><li class='line'><span class='gutter'>42</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>43</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>//var res1 = malica.SmartInputDetector.detect(&quot;this is the description of a present&quot;);</pre></li><li class='line'><span class='gutter'>44</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>/*</pre></li><li class='line'><span class='gutter'>45</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>res1.url = undefined;</pre></li><li class='line'><span class='gutter'>46</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>res1.description = &quot;this is the description of a present&quot;;</pre></li><li class='line'><span class='gutter'>47</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>*/</pre></li><li class='line'><span class='gutter'>48</span><ul class='messages'><li class='error'>Word www doesn't mean anything</li><li class='error'>Word fr doesn't mean anything</li><li class='error'>Word dvds doesn't mean anything</li></ul><pre class='code'>//var res2 = malica.SmartInputDetector.detect(&quot;www.amazon.fr/dvds/test&quot;);</pre></li><li class='line'><span class='gutter'>49</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>/*</pre></li><li class='line'><span class='gutter'>50</span><ul class='messages'><li class='error'>Word www doesn't mean anything</li><li class='error'>Word fr doesn't mean anything</li><li class='error'>Word dvds doesn't mean anything</li></ul><pre class='code'>res2.url = &quot;http://www.amazon.fr/dvds/test&quot;;</pre></li><li class='line'><span class='gutter'>51</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>res2.description = undefined;</pre></li><li class='line'><span class='gutter'>52</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>*/</pre></li><li class='line'><span class='gutter'>53</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>//var res3 = malica.SmartInputDetector.detect(&quot;http://greatstuff.org/products/stereo-34-124.html?test=true&quot;);</pre></li><li class='line'><span class='gutter'>54</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>/*</pre></li><li class='line'><span class='gutter'>55</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>res3.url = &quot;http://greatstuff.org/products/stereo-34-124.html?test=true&quot;;</pre></li><li class='line'><span class='gutter'>56</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>res3.description = undefined;</pre></li><li class='line'><span class='gutter'>57</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>*/</pre></li><li class='line'><span class='gutter'>58</span><ul class='messages'><li class='error'>Line is more than 120 character long (131). This is hard to read.</li><li class='error'>Word www doesn't mean anything</li></ul><pre class='code'>//var res4 = malica.SmartInputDetector.detect(&quot;And this is a tricky case with a description and a URL www.test.com/presents.html&quot;);</pre></li><li class='line'><span class='gutter'>59</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>/*</pre></li><li class='line'><span class='gutter'>60</span><ul class='messages'><li class='error'>Word www doesn't mean anything</li></ul><pre class='code'>res4.url = &quot;http://www.test.com/presents.html&quot;;</pre></li><li class='line'><span class='gutter'>61</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>res4.description = &quot;&quot;And this is a tricky case with a description and a URL&quot;;</pre></li><li class='line'><span class='gutter'>62</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>*/</pre></li><li class='line'><span class='gutter'>63</span><ul class='messages'><li class='error'>Line is more than 120 character long (180). This is hard to read.</li><li class='error'>Word n doesn't mean anything</li></ul><pre class='code'>//var res5 = malica.SmartInputDetector.detect(&quot;Sometimes the url http://google.com/test/another/path?to=a&amp;file is mixed into the description and there can be \n carriage returns&quot;);</pre></li><li class='line'><span class='gutter'>64</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>/*</pre></li><li class='line'><span class='gutter'>65</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>res5.url = &quot;http://google.com/test/another/path?to=a&amp;file&quot;;</pre></li><li class='line'><span class='gutter'>66</span><ul class='messages'><li class='error'>Word n doesn't mean anything</li></ul><pre class='code'>res5.description = &quot;Sometimes the url is mixed into the description and there can be \n carriage returns&quot;;</pre></li><li class='line'><span class='gutter'>67</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>*/</pre></li></ul></body></html>