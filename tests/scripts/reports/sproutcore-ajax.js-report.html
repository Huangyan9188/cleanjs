<!DOCTYPE html>
	<html lang="en">
		<head>
			<meta charset="utf-8">
		    <title>cleanjs report for file scripts/sproutcore-ajax.js</title>
			<style type="text/css">
				body {
					margin: 0;
					padding: 1em;
					font-size: 12px;
					font-family: verdana;
					overflow-x: hidden;
					width: 100%;
					color: #444;
				}
				h1 {
					margin: 0;
					padding: 1em 1em 1em 25px;
				}
				.general {
					padding: 0;
					margin: 0 0 30px 30px;
					list-style-type: none;
					width: 500px;
					color: #222;
				}
				.lines {
					padding: 0;
					margin: 0;
					list-style-type: none;
					width: 10000px;
				}
				.lines .line {
					overflow: hidden;
					padding: 0;
					margin: 0;
					list-style-type: none;
				}
				.lines .line .gutter {
					float: left;
					text-align: right;
					width: 25px;
					padding: 4px 5px 4px 0;
					color: #aaa;
					font-size: 11px;
				}
				.lines .nomessage .gutter {
					color: #ddd;
				}
				.lines .line .messages {
					float: left;
					padding: 0;
					margin: 0;
					list-style-type: none;
					width: 500px;
				}
				.lines .line .messages li, .general li {
					padding: 4px 1em;
					line-height: 13px;
				}
				.lines .line .code {
					float :left;
					margin: 0;
					padding: 0 1em;
					font-family: Menlo, Monaco, Consolas, "Lucida Console", monospace;
					font-size: 11px;
				}
				.error, .info, .warning {
					border-left: 4px solid #3e93bf;
					background: #eee;
				}
				.warning {
					border-color: #f5931f;
				}
				.error {
					font-weight: bold;
					border-color: #d83e0f;
				}
			</style>
		</head>
		<body>
			<h1>scripts/sproutcore-ajax.js | grade really really bad</h1><ul class='general'><li class='info'>File is 666 lines long</li><li class='info'>310 lines of comments</li><li class='info'>227 lines of code</li><li class='info'>132 empty lines</li><li class='info'>There are 27 functions in the file</li><li class='info'>Longest function is 24 lines long, and shortest one is 0 (average is 5)</li><li class='error'>There are more than 300 lines in the file (666) ! Surely the file is doing more than 1 thing</li><li class='error'>It seems you haven't properly formatted your file. Make sure you have configured a proper formatter</li></ul><ul class='lines'><li class='line'><span class='gutter'>1</span><ul class='messages'><li class='warning'>You have 6 subsequent lines of comments in a row. Are you trying to explain something complex?</li><li class='warning'>You are using some kind of separator characters in your comment, probably in an attempt to separate some complex code ... why not making it simpler in the first place?</li><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>// ==========================================================================</pre></li><li class='line nomessage'><span class='gutter'>2</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>// Project:   SproutCore - JavaScript Application Framework</pre></li><li class='line nomessage'><span class='gutter'>3</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>// Copyright: 2006-2011 Strobe Inc. and contributors.</pre></li><li class='line nomessage'><span class='gutter'>4</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>//            Portions 2008-2011 Apple Inc. All rights reserved.</pre></li><li class='line nomessage'><span class='gutter'>5</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>// License:   Licensed under MIT license (see license.js)</pre></li><li class='line'><span class='gutter'>6</span><ul class='messages'><li class='warning'>You are using some kind of separator characters in your comment, probably in an attempt to separate some complex code ... why not making it simpler in the first place?</li></ul><pre class='code'>// ==========================================================================</pre></li><li class='line nomessage'><span class='gutter'>7</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>8</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>sc_require(&apos;system/response&apos;);</pre></li><li class='line nomessage'><span class='gutter'>9</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>10</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>/**</pre></li><li class='line nomessage'><span class='gutter'>11</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  @class</pre></li><li class='line nomessage'><span class='gutter'>12</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>13</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  Implements support for Ajax requests using XHR and other prototcols.</pre></li><li class='line nomessage'><span class='gutter'>14</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>15</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  SC.Request is much like an inverted version of the request/response objects</pre></li><li class='line nomessage'><span class='gutter'>16</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  you receive when implementing HTTP servers.</pre></li><li class='line nomessage'><span class='gutter'>17</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>18</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  To send a request, you just need to create your request object, configure</pre></li><li class='line nomessage'><span class='gutter'>19</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  your options, and call send() to initiate the request.</pre></li><li class='line nomessage'><span class='gutter'>20</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>21</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  @extends SC.Object</pre></li><li class='line nomessage'><span class='gutter'>22</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  @extends SC.Copyable</pre></li><li class='line nomessage'><span class='gutter'>23</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  @extends SC.Freezable</pre></li><li class='line nomessage'><span class='gutter'>24</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  @since SproutCore 1.0</pre></li><li class='line nomessage'><span class='gutter'>25</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>*/</pre></li><li class='line nomessage'><span class='gutter'>26</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>SC.Request = SC.Object.extend(SC.Copyable, SC.Freezable,</pre></li><li class='line'><span class='gutter'>27</span><ul class='messages'><li class='warning'>Line has both code and comments. This is usually a sign that you need to explain a complex piece of code.</li></ul><pre class='code'>/** @scope SC.Request.prototype */ {</pre></li><li class='line nomessage'><span class='gutter'>28</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>29</span><ul class='messages'><li class='warning'>You have 3 subsequent lines of comments in a row. Are you trying to explain something complex?</li><li class='warning'>You are using some kind of separator characters in your comment, probably in an attempt to separate some complex code ... why not making it simpler in the first place?</li></ul><pre class='code'>  // ..........................................................</pre></li><li class='line nomessage'><span class='gutter'>30</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  // PROPERTIES</pre></li><li class='line nomessage'><span class='gutter'>31</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  // </pre></li><li class='line nomessage'><span class='gutter'>32</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>33</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>34</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Sends the request asynchronously instead of blocking the browser. You</pre></li><li class='line nomessage'><span class='gutter'>35</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    should almost always make requests asynchronous. You can change this</pre></li><li class='line nomessage'><span class='gutter'>36</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    options with the async() helper option (or simply set it directly).</pre></li><li class='line nomessage'><span class='gutter'>37</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>38</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @type Boolean</pre></li><li class='line nomessage'><span class='gutter'>39</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @default YES</pre></li><li class='line nomessage'><span class='gutter'>40</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>41</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  isAsynchronous: YES,</pre></li><li class='line nomessage'><span class='gutter'>42</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>43</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>44</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Processes the request and response as JSON if possible. You can change</pre></li><li class='line nomessage'><span class='gutter'>45</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    this option with the json() helper method.</pre></li><li class='line nomessage'><span class='gutter'>46</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>47</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @type Boolean</pre></li><li class='line nomessage'><span class='gutter'>48</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @default NO</pre></li><li class='line nomessage'><span class='gutter'>49</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>50</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  isJSON: NO,</pre></li><li class='line nomessage'><span class='gutter'>51</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>52</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>53</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Process the request and response as XML if possible. You can change this</pre></li><li class='line nomessage'><span class='gutter'>54</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    option with the xml() helper method.</pre></li><li class='line nomessage'><span class='gutter'>55</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>56</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @type Boolean</pre></li><li class='line nomessage'><span class='gutter'>57</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @default NO</pre></li><li class='line nomessage'><span class='gutter'>58</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>59</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  isXML: NO,</pre></li><li class='line nomessage'><span class='gutter'>60</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>61</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>62</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Specifies whether or not the request will have custom headers attached</pre></li><li class='line nomessage'><span class='gutter'>63</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    to it. By default, SC.Request attaches X-Requested-With and</pre></li><li class='line nomessage'><span class='gutter'>64</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    X-SproutCore-Version headers to all outgoing requests. This allows</pre></li><li class='line nomessage'><span class='gutter'>65</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    you to override that behavior.</pre></li><li class='line nomessage'><span class='gutter'>66</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>67</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>    You may want to set this to NO if you are making simple CORS requests</pre></li><li class='line nomessage'><span class='gutter'>68</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    in compatible browsers. See &lt;a href=&quot;http://www.w3.org/TR/cors/&quot;&gt;CORS </pre></li><li class='line nomessage'><span class='gutter'>69</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Spec for more information.&lt;/a&gt;</pre></li><li class='line nomessage'><span class='gutter'>70</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    </pre></li><li class='line'><span class='gutter'>71</span><ul class='messages'><li class='info'>TODO : Add unit tests for this feature</li></ul><pre class='code'>    TODO: Add unit tests for this feature</pre></li><li class='line nomessage'><span class='gutter'>72</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>73</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @type Boolean</pre></li><li class='line nomessage'><span class='gutter'>74</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @default YES</pre></li><li class='line nomessage'><span class='gutter'>75</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>76</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  attachIdentifyingHeaders: YES,</pre></li><li class='line nomessage'><span class='gutter'>77</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>78</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>79</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Current set of headers for the request</pre></li><li class='line nomessage'><span class='gutter'>80</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>81</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @field</pre></li><li class='line nomessage'><span class='gutter'>82</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @type Hash</pre></li><li class='line nomessage'><span class='gutter'>83</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @default {}</pre></li><li class='line nomessage'><span class='gutter'>84</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>85</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  headers: function() {</pre></li><li class='line nomessage'><span class='gutter'>86</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    var ret = this._headers;</pre></li><li class='line nomessage'><span class='gutter'>87</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (!ret) { ret = this._headers = {}; }</pre></li><li class='line nomessage'><span class='gutter'>88</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return ret;</pre></li><li class='line nomessage'><span class='gutter'>89</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  }.property().cacheable(),</pre></li><li class='line nomessage'><span class='gutter'>90</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>91</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>92</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Underlying response class to actually handle this request. Currently the</pre></li><li class='line nomessage'><span class='gutter'>93</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    only supported option is SC.XHRResponse which uses a traditional</pre></li><li class='line nomessage'><span class='gutter'>94</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    XHR transport.</pre></li><li class='line nomessage'><span class='gutter'>95</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>96</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @type SC.Response</pre></li><li class='line nomessage'><span class='gutter'>97</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @default SC.XHRResponse</pre></li><li class='line nomessage'><span class='gutter'>98</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>99</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  responseClass: SC.XHRResponse,</pre></li><li class='line nomessage'><span class='gutter'>100</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>101</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>102</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    The original request for copied requests.</pre></li><li class='line nomessage'><span class='gutter'>103</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>104</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @property SC.Request</pre></li><li class='line nomessage'><span class='gutter'>105</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @default null</pre></li><li class='line nomessage'><span class='gutter'>106</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>107</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  source: null,</pre></li><li class='line nomessage'><span class='gutter'>108</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>109</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>110</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    The URL this request to go to.</pre></li><li class='line nomessage'><span class='gutter'>111</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>112</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @type String</pre></li><li class='line nomessage'><span class='gutter'>113</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @default null</pre></li><li class='line nomessage'><span class='gutter'>114</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>115</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  address: null,</pre></li><li class='line nomessage'><span class='gutter'>116</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>117</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>118</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    The HTTP method to use.</pre></li><li class='line nomessage'><span class='gutter'>119</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>120</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @type String</pre></li><li class='line nomessage'><span class='gutter'>121</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @default &apos;GET&apos;</pre></li><li class='line nomessage'><span class='gutter'>122</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>123</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  type: &apos;GET&apos;,</pre></li><li class='line nomessage'><span class='gutter'>124</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  </pre></li><li class='line nomessage'><span class='gutter'>125</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>126</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    An optional timeout value of the request, in milliseconds. The timer</pre></li><li class='line nomessage'><span class='gutter'>127</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    begins when SC.Response#fire is actually invoked by the request manager</pre></li><li class='line nomessage'><span class='gutter'>128</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    and not necessarily when SC.Request#send is invoked. If this timeout is</pre></li><li class='line nomessage'><span class='gutter'>129</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    reached before a response is received, the equivalent of</pre></li><li class='line nomessage'><span class='gutter'>130</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    SC.Request.manager#cancel() will be invoked on the SC.Response instance</pre></li><li class='line nomessage'><span class='gutter'>131</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    and the didReceive() callback will be called.</pre></li><li class='line nomessage'><span class='gutter'>132</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>133</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>    An exception will be thrown if you try to invoke send() on a request that</pre></li><li class='line nomessage'><span class='gutter'>134</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    has both a timeout and isAsyncronous set to NO.</pre></li><li class='line nomessage'><span class='gutter'>135</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>136</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @type Number</pre></li><li class='line nomessage'><span class='gutter'>137</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @default null</pre></li><li class='line nomessage'><span class='gutter'>138</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>139</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  timeout: null,</pre></li><li class='line nomessage'><span class='gutter'>140</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  </pre></li><li class='line'><span class='gutter'>141</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>142</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    The body of the request.  May be an object is isJSON or isXML is set,</pre></li><li class='line nomessage'><span class='gutter'>143</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    otherwise should be a string.</pre></li><li class='line nomessage'><span class='gutter'>144</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>145</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @type Object|String</pre></li><li class='line nomessage'><span class='gutter'>146</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @default null</pre></li><li class='line nomessage'><span class='gutter'>147</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>148</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  body: null,</pre></li><li class='line nomessage'><span class='gutter'>149</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  </pre></li><li class='line'><span class='gutter'>150</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>151</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    The body, encoded as JSON or XML if needed.</pre></li><li class='line nomessage'><span class='gutter'>152</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>153</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @field</pre></li><li class='line nomessage'><span class='gutter'>154</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @type Object|String</pre></li><li class='line nomessage'><span class='gutter'>155</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @default #body</pre></li><li class='line nomessage'><span class='gutter'>156</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>157</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  encodedBody: function() {</pre></li><li class='line'><span class='gutter'>158</span><ul class='messages'><li class='info'>TODO : support XML</li></ul><pre class='code'>    // TODO: support XML</pre></li><li class='line nomessage'><span class='gutter'>159</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    var ret = this.get(&apos;body&apos;);</pre></li><li class='line nomessage'><span class='gutter'>160</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (ret &amp;&amp; this.get(&apos;isJSON&apos;)) { ret = SC.json.encode(ret); }</pre></li><li class='line nomessage'><span class='gutter'>161</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return ret;</pre></li><li class='line nomessage'><span class='gutter'>162</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  }.property(&apos;isJSON&apos;, &apos;isXML&apos;, &apos;body&apos;).cacheable(),</pre></li><li class='line nomessage'><span class='gutter'>163</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>164</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>165</span><ul class='messages'><li class='warning'>You have 3 subsequent lines of comments in a row. Are you trying to explain something complex?</li><li class='warning'>You are using some kind of separator characters in your comment, probably in an attempt to separate some complex code ... why not making it simpler in the first place?</li></ul><pre class='code'>  // ..........................................................</pre></li><li class='line nomessage'><span class='gutter'>166</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  // CALLBACKS</pre></li><li class='line nomessage'><span class='gutter'>167</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  //</pre></li><li class='line nomessage'><span class='gutter'>168</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>169</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>170</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Invoked on the original request object just before a copied request is</pre></li><li class='line nomessage'><span class='gutter'>171</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    frozen and then sent to the server. This gives you one last change to</pre></li><li class='line nomessage'><span class='gutter'>172</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    fixup the request; possibly adding headers and other options.</pre></li><li class='line nomessage'><span class='gutter'>173</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>174</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    If you do not want the request to actually send, call cancel().</pre></li><li class='line nomessage'><span class='gutter'>175</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>176</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {SC.Request} request A copy of the request object, not frozen</pre></li><li class='line nomessage'><span class='gutter'>177</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {SC.Response} response The object that will wrap the response</pre></li><li class='line nomessage'><span class='gutter'>178</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line'><span class='gutter'>179</span><ul class='messages'><li class='warning'>Function willSend is empty. Is it really needed?</li><li class='error'>Argument request in method willSend is never used</li><li class='error'>Argument response in method willSend is never used</li></ul><pre class='code'>  willSend: function(request, response) {},</pre></li><li class='line nomessage'><span class='gutter'>180</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>181</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>182</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Invoked on the original request object just after the request is sent to</pre></li><li class='line nomessage'><span class='gutter'>183</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    the server. You might use this callback to update some state in your</pre></li><li class='line nomessage'><span class='gutter'>184</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    application.</pre></li><li class='line nomessage'><span class='gutter'>185</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>186</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    The passed request is a frozen copy of the request, indicating the</pre></li><li class='line nomessage'><span class='gutter'>187</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    options set at the time of the request.</pre></li><li class='line nomessage'><span class='gutter'>188</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>189</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {SC.Request} request A copy of the request object, frozen</pre></li><li class='line nomessage'><span class='gutter'>190</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {SC.Response} response The object that will wrap the response</pre></li><li class='line nomessage'><span class='gutter'>191</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {Boolean} YES on success, NO on failure</pre></li><li class='line nomessage'><span class='gutter'>192</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line'><span class='gutter'>193</span><ul class='messages'><li class='warning'>Function didSend is empty. Is it really needed?</li><li class='error'>Argument request in method didSend is never used</li><li class='error'>Argument response in method didSend is never used</li></ul><pre class='code'>  didSend: function(request, response) {},</pre></li><li class='line nomessage'><span class='gutter'>194</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>195</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>196</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Invoked when a response has been received but not yet processed. This is</pre></li><li class='line nomessage'><span class='gutter'>197</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    your chance to fix up the response based on the results. If you don&apos;t</pre></li><li class='line nomessage'><span class='gutter'>198</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    want to continue processing the response call response.cancel().</pre></li><li class='line nomessage'><span class='gutter'>199</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>200</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {SC.Request} request A copy of the request object, frozen</pre></li><li class='line nomessage'><span class='gutter'>201</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {SC.Response} response The object that will wrap the response</pre></li><li class='line nomessage'><span class='gutter'>202</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line'><span class='gutter'>203</span><ul class='messages'><li class='warning'>Function willReceive is empty. Is it really needed?</li><li class='error'>Argument request in method willReceive is never used</li><li class='error'>Argument response in method willReceive is never used</li></ul><pre class='code'>  willReceive: function(request, response) {},</pre></li><li class='line nomessage'><span class='gutter'>204</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>205</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>206</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Invoked after a response has been processed but before any listeners are</pre></li><li class='line nomessage'><span class='gutter'>207</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    notified. You can do any standard processing on the request at this</pre></li><li class='line nomessage'><span class='gutter'>208</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    point. If you don&apos;t want to allow notifications to continue, call</pre></li><li class='line nomessage'><span class='gutter'>209</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    response.cancel()</pre></li><li class='line nomessage'><span class='gutter'>210</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>211</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {SC.Request} request A copy of the request object, frozen</pre></li><li class='line nomessage'><span class='gutter'>212</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {SC.Response} response The object that will wrap the response</pre></li><li class='line nomessage'><span class='gutter'>213</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line'><span class='gutter'>214</span><ul class='messages'><li class='warning'>Function didReceive is empty. Is it really needed?</li><li class='error'>Argument request in method didReceive is never used</li><li class='error'>Argument response in method didReceive is never used</li></ul><pre class='code'>  didReceive: function(request, response) {},</pre></li><li class='line nomessage'><span class='gutter'>215</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>216</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>217</span><ul class='messages'><li class='warning'>You have 3 subsequent lines of comments in a row. Are you trying to explain something complex?</li><li class='warning'>You are using some kind of separator characters in your comment, probably in an attempt to separate some complex code ... why not making it simpler in the first place?</li></ul><pre class='code'>  // ..........................................................</pre></li><li class='line nomessage'><span class='gutter'>218</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  // HELPER METHODS</pre></li><li class='line nomessage'><span class='gutter'>219</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  //</pre></li><li class='line nomessage'><span class='gutter'>220</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>221</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /** @private */</pre></li><li class='line nomessage'><span class='gutter'>222</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  concatenatedProperties: &apos;COPY_KEYS&apos;,</pre></li><li class='line nomessage'><span class='gutter'>223</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>224</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /** @private */</pre></li><li class='line'><span class='gutter'>225</span><ul class='messages'><li class='error'>Line is more than 120 character long (186). This is hard to read.</li></ul><pre class='code'>  COPY_KEYS: [&apos;attachIdentifyingHeaders&apos;, &apos;isAsynchronous&apos;, &apos;isJSON&apos;, &apos;isXML&apos;, &apos;address&apos;, &apos;type&apos;, &apos;timeout&apos;, &apos;body&apos;, &apos;responseClass&apos;, &apos;willSend&apos;, &apos;didSend&apos;, &apos;willReceive&apos;, &apos;didReceive&apos;],</pre></li><li class='line nomessage'><span class='gutter'>226</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  </pre></li><li class='line'><span class='gutter'>227</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>228</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Returns a copy of the current request. This will only copy certain</pre></li><li class='line nomessage'><span class='gutter'>229</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    properties so if you want to add additional properties to the copy you</pre></li><li class='line nomessage'><span class='gutter'>230</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    will need to override copy() in a subclass.</pre></li><li class='line nomessage'><span class='gutter'>231</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>232</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {SC.Request} new request</pre></li><li class='line nomessage'><span class='gutter'>233</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>234</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  copy: function() {</pre></li><li class='line'><span class='gutter'>235</span><ul class='messages'><li class='error'>The name of variable ret is too short</li></ul><pre class='code'>    var ret = {},</pre></li><li class='line nomessage'><span class='gutter'>236</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        keys = this.COPY_KEYS,</pre></li><li class='line nomessage'><span class='gutter'>237</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        loc = keys.length,</pre></li><li class='line nomessage'><span class='gutter'>238</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        key, listeners, headers;</pre></li><li class='line nomessage'><span class='gutter'>239</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>240</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    while(--loc &gt;= 0) {</pre></li><li class='line nomessage'><span class='gutter'>241</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      key = keys[loc];</pre></li><li class='line nomessage'><span class='gutter'>242</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      if (this.hasOwnProperty(key)) {</pre></li><li class='line nomessage'><span class='gutter'>243</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        ret[key] = this.get(key);</pre></li><li class='line nomessage'><span class='gutter'>244</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      }</pre></li><li class='line nomessage'><span class='gutter'>245</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    }</pre></li><li class='line nomessage'><span class='gutter'>246</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>247</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (this.hasOwnProperty(&apos;listeners&apos;)) {</pre></li><li class='line nomessage'><span class='gutter'>248</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      ret.listeners = SC.copy(this.get(&apos;listeners&apos;));</pre></li><li class='line nomessage'><span class='gutter'>249</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    }</pre></li><li class='line nomessage'><span class='gutter'>250</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>251</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (this.hasOwnProperty(&apos;_headers&apos;)) {</pre></li><li class='line nomessage'><span class='gutter'>252</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      ret._headers = SC.copy(this._headers);</pre></li><li class='line nomessage'><span class='gutter'>253</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    }</pre></li><li class='line nomessage'><span class='gutter'>254</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>255</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    ret.source = this.get(&apos;source&apos;) || this;</pre></li><li class='line nomessage'><span class='gutter'>256</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>257</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return this.constructor.create(ret);</pre></li><li class='line nomessage'><span class='gutter'>258</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>259</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>260</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>261</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    To set headers on the request object. Pass either a single key/value</pre></li><li class='line nomessage'><span class='gutter'>262</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    pair or a hash of key/value pairs. If you pass only a header name, this</pre></li><li class='line nomessage'><span class='gutter'>263</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    will return the current value of the header.</pre></li><li class='line nomessage'><span class='gutter'>264</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>265</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {String|Hash} key</pre></li><li class='line nomessage'><span class='gutter'>266</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {String} value</pre></li><li class='line nomessage'><span class='gutter'>267</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {SC.Request|Object} receiver</pre></li><li class='line nomessage'><span class='gutter'>268</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line'><span class='gutter'>269</span><ul class='messages'><li class='warning'>There are more than 20 lines in function header (23)! If possible, please try to refactor it</li><li class='warning'>Function header is getting complex. There may be too much logic going on. Think about splitting.</li><li class='warning'>Function header returns more than 2 values (4).</li></ul><pre class='code'>  header: function(key, value) {</pre></li><li class='line nomessage'><span class='gutter'>270</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    var headers;</pre></li><li class='line nomessage'><span class='gutter'>271</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>272</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (SC.typeOf(key) === SC.T_STRING) {</pre></li><li class='line nomessage'><span class='gutter'>273</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      headers = this._headers;</pre></li><li class='line nomessage'><span class='gutter'>274</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      if (arguments.length === 1) {</pre></li><li class='line nomessage'><span class='gutter'>275</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        return headers ? headers[key] : null;</pre></li><li class='line nomessage'><span class='gutter'>276</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      } else {</pre></li><li class='line nomessage'><span class='gutter'>277</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        this.propertyWillChange(&apos;headers&apos;);</pre></li><li class='line nomessage'><span class='gutter'>278</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        if (!headers) { headers = this._headers = {}; }</pre></li><li class='line nomessage'><span class='gutter'>279</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        headers[key] = value;</pre></li><li class='line nomessage'><span class='gutter'>280</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        this.propertyDidChange(&apos;headers&apos;);</pre></li><li class='line nomessage'><span class='gutter'>281</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        return this;</pre></li><li class='line nomessage'><span class='gutter'>282</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      }</pre></li><li class='line nomessage'><span class='gutter'>283</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>284</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    // handle parsing hash of parameters</pre></li><li class='line nomessage'><span class='gutter'>285</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    } else if (value === undefined) {</pre></li><li class='line nomessage'><span class='gutter'>286</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      headers = key;</pre></li><li class='line nomessage'><span class='gutter'>287</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      this.beginPropertyChanges();</pre></li><li class='line nomessage'><span class='gutter'>288</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      for(key in headers) {</pre></li><li class='line nomessage'><span class='gutter'>289</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        if (!headers.hasOwnProperty(key)) { continue; }</pre></li><li class='line nomessage'><span class='gutter'>290</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        this.header(key, headers[key]);</pre></li><li class='line nomessage'><span class='gutter'>291</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      }</pre></li><li class='line nomessage'><span class='gutter'>292</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      this.endPropertyChanges();</pre></li><li class='line nomessage'><span class='gutter'>293</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      return this;</pre></li><li class='line nomessage'><span class='gutter'>294</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    }</pre></li><li class='line nomessage'><span class='gutter'>295</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>296</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return this;</pre></li><li class='line nomessage'><span class='gutter'>297</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>298</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>299</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>300</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Clears the list of headers that were set on this request.</pre></li><li class='line nomessage'><span class='gutter'>301</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    This could be used by a subclass to blow-away any custom</pre></li><li class='line nomessage'><span class='gutter'>302</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    headers that were added by the super class.</pre></li><li class='line nomessage'><span class='gutter'>303</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>304</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  clearHeaders: function() {</pre></li><li class='line nomessage'><span class='gutter'>305</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    this.propertyWillChange(&apos;headers&apos;);</pre></li><li class='line nomessage'><span class='gutter'>306</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    this._headers = {};</pre></li><li class='line nomessage'><span class='gutter'>307</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    this.propertyDidChange(&apos;headers&apos;);</pre></li><li class='line nomessage'><span class='gutter'>308</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>309</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>310</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>311</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Converts the current request to be asynchronous.</pre></li><li class='line nomessage'><span class='gutter'>312</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>313</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>    @param {Boolean} flag YES to make asynchronous, NO or undefined. Default YES.</pre></li><li class='line nomessage'><span class='gutter'>314</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {SC.Request} receiver</pre></li><li class='line nomessage'><span class='gutter'>315</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>316</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  async: function(flag) {</pre></li><li class='line nomessage'><span class='gutter'>317</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (flag === undefined) { flag = YES; }</pre></li><li class='line nomessage'><span class='gutter'>318</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return this.set(&apos;isAsynchronous&apos;, flag);</pre></li><li class='line nomessage'><span class='gutter'>319</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>320</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>321</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>322</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Sets the maximum amount of time the request will wait for a response.</pre></li><li class='line nomessage'><span class='gutter'>323</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>324</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {Number} timeout The timeout in milliseconds.</pre></li><li class='line nomessage'><span class='gutter'>325</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {SC.Request} receiver</pre></li><li class='line nomessage'><span class='gutter'>326</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>327</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  timeoutAfter: function(timeout) {</pre></li><li class='line nomessage'><span class='gutter'>328</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return this.set(&apos;timeout&apos;, timeout);</pre></li><li class='line nomessage'><span class='gutter'>329</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>330</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>331</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>332</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Converts the current request to use JSON.</pre></li><li class='line nomessage'><span class='gutter'>333</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>334</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>    @param {Boolean} flag YES to make JSON, NO or undefined. Default YES.</pre></li><li class='line nomessage'><span class='gutter'>335</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {SC.Request} receiver</pre></li><li class='line nomessage'><span class='gutter'>336</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>337</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  json: function(flag) {</pre></li><li class='line nomessage'><span class='gutter'>338</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (flag === undefined) { flag = YES; }</pre></li><li class='line nomessage'><span class='gutter'>339</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (flag) { this.set(&apos;isXML&apos;, NO); }</pre></li><li class='line nomessage'><span class='gutter'>340</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return this.set(&apos;isJSON&apos;, flag);</pre></li><li class='line nomessage'><span class='gutter'>341</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>342</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>343</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>344</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Converts the current request to use XML.</pre></li><li class='line nomessage'><span class='gutter'>345</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>346</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>    @param {Boolean} flag YES to make XML, NO or undefined. Default YES.</pre></li><li class='line nomessage'><span class='gutter'>347</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {SC.Request} recevier</pre></li><li class='line nomessage'><span class='gutter'>348</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>349</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  xml: function(flag) {</pre></li><li class='line nomessage'><span class='gutter'>350</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (flag === undefined) { flag = YES; }</pre></li><li class='line nomessage'><span class='gutter'>351</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (flag) { this.set(&apos;isJSON&apos;, NO); }</pre></li><li class='line nomessage'><span class='gutter'>352</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return this.set(&apos;isXML&apos;, flag);</pre></li><li class='line nomessage'><span class='gutter'>353</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>354</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  </pre></li><li class='line'><span class='gutter'>355</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  /** </pre></li><li class='line nomessage'><span class='gutter'>356</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Called just before a request is enqueued.  This will encode the body </pre></li><li class='line nomessage'><span class='gutter'>357</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    into JSON if it is not already encoded, and set identifying headers</pre></li><li class='line nomessage'><span class='gutter'>358</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>359</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  _prep: function() {</pre></li><li class='line'><span class='gutter'>360</span><ul class='messages'><li class='error'>Variable hasContentType in method _prep is declared but never used</li></ul><pre class='code'>    var hasContentType = !!this.header(&apos;Content-Type&apos;);</pre></li><li class='line nomessage'><span class='gutter'>361</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>362</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if(this.get(&apos;attachIdentifyingHeaders&apos;)) {</pre></li><li class='line nomessage'><span class='gutter'>363</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      this.header(&apos;X-Requested-With&apos;, &apos;XMLHttpRequest&apos;);</pre></li><li class='line nomessage'><span class='gutter'>364</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      this.header(&apos;X-SproutCore-Version&apos;, SC.VERSION);</pre></li><li class='line nomessage'><span class='gutter'>365</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    }</pre></li><li class='line nomessage'><span class='gutter'>366</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    </pre></li><li class='line nomessage'><span class='gutter'>367</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (this.get(&apos;isJSON&apos;) &amp;&amp; !hasContentType) {</pre></li><li class='line nomessage'><span class='gutter'>368</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      this.header(&apos;Content-Type&apos;, &apos;application/json&apos;);</pre></li><li class='line nomessage'><span class='gutter'>369</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    } else if (this.get(&apos;isXML&apos;) &amp;&amp; !hasContentType) {</pre></li><li class='line nomessage'><span class='gutter'>370</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      this.header(&apos;Content-Type&apos;, &apos;text/xml&apos;);</pre></li><li class='line nomessage'><span class='gutter'>371</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    }</pre></li><li class='line nomessage'><span class='gutter'>372</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return this;</pre></li><li class='line nomessage'><span class='gutter'>373</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>374</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  </pre></li><li class='line nomessage'><span class='gutter'>375</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>376</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Will fire the actual request. If you have set the request to use JSON</pre></li><li class='line nomessage'><span class='gutter'>377</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    mode then you can pass any object that can be converted to JSON as the</pre></li><li class='line nomessage'><span class='gutter'>378</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    body. Otherwise you should pass a string body.</pre></li><li class='line nomessage'><span class='gutter'>379</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    </pre></li><li class='line nomessage'><span class='gutter'>380</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {String|Object} [body]</pre></li><li class='line nomessage'><span class='gutter'>381</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {SC.Response} New response object</pre></li><li class='line nomessage'><span class='gutter'>382</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */  </pre></li><li class='line nomessage'><span class='gutter'>383</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  send: function(body) {</pre></li><li class='line'><span class='gutter'>384</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>    // Sanity-check: Be sure a timeout value was not specified if the request</pre></li><li class='line nomessage'><span class='gutter'>385</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    // is synchronous (because it wouldn&apos;t work).</pre></li><li class='line nomessage'><span class='gutter'>386</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    var timeout = this.get(&apos;timeout&apos;);</pre></li><li class='line nomessage'><span class='gutter'>387</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (timeout &amp;&amp; !this.get(&apos;isAsynchronous&apos;)) {</pre></li><li class='line nomessage'><span class='gutter'>388</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      throw &quot;Timeout values cannot be used with synchronous requests&quot;;</pre></li><li class='line nomessage'><span class='gutter'>389</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    } else if (timeout === 0) {</pre></li><li class='line nomessage'><span class='gutter'>390</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      throw &quot;The timeout value must either not be specified or must be greater than 0&quot;;</pre></li><li class='line nomessage'><span class='gutter'>391</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    }</pre></li><li class='line nomessage'><span class='gutter'>392</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>393</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (body) { this.set(&apos;body&apos;, body); }</pre></li><li class='line nomessage'><span class='gutter'>394</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return SC.Request.manager.sendRequest(this.copy()._prep());</pre></li><li class='line nomessage'><span class='gutter'>395</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>396</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>397</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>398</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Resends the current request. This is more efficient than calling send()</pre></li><li class='line nomessage'><span class='gutter'>399</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    for requests that have already been used in a send. Otherwise acts just</pre></li><li class='line nomessage'><span class='gutter'>400</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    like send(). Does not take a body argument.</pre></li><li class='line nomessage'><span class='gutter'>401</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>402</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {SC.Response} new response object</pre></li><li class='line nomessage'><span class='gutter'>403</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>404</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  resend: function() {</pre></li><li class='line nomessage'><span class='gutter'>405</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    var req = this.get(&apos;source&apos;) ? this : this.copy()._prep();</pre></li><li class='line nomessage'><span class='gutter'>406</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return SC.Request.manager.sendRequest(req);</pre></li><li class='line nomessage'><span class='gutter'>407</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>408</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>409</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>410</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Configures a callback to execute when a request completes. You must pass</pre></li><li class='line nomessage'><span class='gutter'>411</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    at least a target and action/method to this and optionally a status code.</pre></li><li class='line nomessage'><span class='gutter'>412</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    You may also pass additional parameters which will be passed along to your</pre></li><li class='line nomessage'><span class='gutter'>413</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    callback. If your callback handled the notification, it should return YES.</pre></li><li class='line nomessage'><span class='gutter'>414</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>415</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    ## Scoping With Status Codes</pre></li><li class='line nomessage'><span class='gutter'>416</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>417</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>    If you pass a status code as the first option to this method, then your</pre></li><li class='line nomessage'><span class='gutter'>418</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    notification callback will only be called if the response status matches</pre></li><li class='line nomessage'><span class='gutter'>419</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    the code. For example, if you pass 201 (or SC.Request.CREATED) then</pre></li><li class='line nomessage'><span class='gutter'>420</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    your method will only be called if the response status from the server</pre></li><li class='line nomessage'><span class='gutter'>421</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    is 201.</pre></li><li class='line nomessage'><span class='gutter'>422</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>423</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>    You can also pass &quot;generic&quot; status codes such as 200, 300, or 400, which</pre></li><li class='line nomessage'><span class='gutter'>424</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    will be invoked anytime the status code is the range if a more specific</pre></li><li class='line nomessage'><span class='gutter'>425</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    notifier was not registered first and returned YES.</pre></li><li class='line nomessage'><span class='gutter'>426</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>427</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>    Finally, passing a status code of 0 or no status at all will cause your</pre></li><li class='line nomessage'><span class='gutter'>428</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    method to be executed no matter what the resulting status is unless a</pre></li><li class='line nomessage'><span class='gutter'>429</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    more specific notifier was registered and returned YES.</pre></li><li class='line nomessage'><span class='gutter'>430</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>431</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    ## Callback Format</pre></li><li class='line nomessage'><span class='gutter'>432</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>433</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Your notification callback should expect to receive the Response object</pre></li><li class='line nomessage'><span class='gutter'>434</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    as the first parameter plus any additional parameters that you pass.</pre></li><li class='line nomessage'><span class='gutter'>435</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>436</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {Number} status</pre></li><li class='line nomessage'><span class='gutter'>437</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {Object} target</pre></li><li class='line nomessage'><span class='gutter'>438</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {String|Function} action</pre></li><li class='line nomessage'><span class='gutter'>439</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {Hash} params</pre></li><li class='line nomessage'><span class='gutter'>440</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {SC.Request} receiver</pre></li><li class='line nomessage'><span class='gutter'>441</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>442</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  notify: function(status, target, action, params) {</pre></li><li class='line nomessage'><span class='gutter'>443</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    // normalize status</pre></li><li class='line nomessage'><span class='gutter'>444</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    var hasStatus = YES;</pre></li><li class='line nomessage'><span class='gutter'>445</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (SC.typeOf(status) !== SC.T_NUMBER) {</pre></li><li class='line nomessage'><span class='gutter'>446</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      params = SC.A(arguments).slice(2);</pre></li><li class='line nomessage'><span class='gutter'>447</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      action = target;</pre></li><li class='line nomessage'><span class='gutter'>448</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      target = status;</pre></li><li class='line nomessage'><span class='gutter'>449</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      status = 0;</pre></li><li class='line nomessage'><span class='gutter'>450</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      hasStatus = NO;</pre></li><li class='line nomessage'><span class='gutter'>451</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    } else {</pre></li><li class='line nomessage'><span class='gutter'>452</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      params = SC.A(arguments).slice(3);</pre></li><li class='line nomessage'><span class='gutter'>453</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    }</pre></li><li class='line nomessage'><span class='gutter'>454</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>455</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    var listeners = this.get(&apos;listeners&apos;);</pre></li><li class='line nomessage'><span class='gutter'>456</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (!listeners) { this.set(&apos;listeners&apos;, listeners = {}); }</pre></li><li class='line nomessage'><span class='gutter'>457</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if(!listeners[status]) { listeners[status] = []; }</pre></li><li class='line nomessage'><span class='gutter'>458</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>459</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    listeners[status].push({target: target, action: action, params: params});</pre></li><li class='line nomessage'><span class='gutter'>460</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>461</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return this;</pre></li><li class='line nomessage'><span class='gutter'>462</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  }</pre></li><li class='line nomessage'><span class='gutter'>463</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>464</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>});</pre></li><li class='line nomessage'><span class='gutter'>465</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>466</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>SC.Request.mixin(</pre></li><li class='line'><span class='gutter'>467</span><ul class='messages'><li class='warning'>Line has both code and comments. This is usually a sign that you need to explain a complex piece of code.</li></ul><pre class='code'>/** @scope SC.Request */ {</pre></li><li class='line nomessage'><span class='gutter'>468</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>469</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>470</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Helper method for quickly setting up a GET request.</pre></li><li class='line nomessage'><span class='gutter'>471</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>472</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {String} address url of request</pre></li><li class='line nomessage'><span class='gutter'>473</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {SC.Request} receiver</pre></li><li class='line nomessage'><span class='gutter'>474</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>475</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  getUrl: function(address) {</pre></li><li class='line nomessage'><span class='gutter'>476</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return this.create().set(&apos;address&apos;, address).set(&apos;type&apos;, &apos;GET&apos;);</pre></li><li class='line nomessage'><span class='gutter'>477</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>478</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>479</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>480</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Helper method for quickly setting up a POST request.</pre></li><li class='line nomessage'><span class='gutter'>481</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>482</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {String} address url of request</pre></li><li class='line nomessage'><span class='gutter'>483</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {String} body</pre></li><li class='line nomessage'><span class='gutter'>484</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {SC.Request} receiver</pre></li><li class='line nomessage'><span class='gutter'>485</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>486</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  postUrl: function(address, body) {</pre></li><li class='line nomessage'><span class='gutter'>487</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    var req = this.create().set(&apos;address&apos;, address).set(&apos;type&apos;, &apos;POST&apos;);</pre></li><li class='line nomessage'><span class='gutter'>488</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if(body) { req.set(&apos;body&apos;, body) ; }</pre></li><li class='line nomessage'><span class='gutter'>489</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return req ;</pre></li><li class='line nomessage'><span class='gutter'>490</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>491</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>492</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>493</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Helper method for quickly setting up a DELETE request.</pre></li><li class='line nomessage'><span class='gutter'>494</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>495</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {String} address url of request</pre></li><li class='line nomessage'><span class='gutter'>496</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {SC.Request} receiver</pre></li><li class='line nomessage'><span class='gutter'>497</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>498</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  deleteUrl: function(address) {</pre></li><li class='line nomessage'><span class='gutter'>499</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return this.create().set(&apos;address&apos;, address).set(&apos;type&apos;, &apos;DELETE&apos;);</pre></li><li class='line nomessage'><span class='gutter'>500</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>501</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>502</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>503</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Helper method for quickly setting up a PUT request.</pre></li><li class='line nomessage'><span class='gutter'>504</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>505</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {String} address url of request</pre></li><li class='line nomessage'><span class='gutter'>506</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {String} body</pre></li><li class='line nomessage'><span class='gutter'>507</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {SC.Request} receiver</pre></li><li class='line nomessage'><span class='gutter'>508</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>509</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  putUrl: function(address, body) {</pre></li><li class='line nomessage'><span class='gutter'>510</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    var req = this.create().set(&apos;address&apos;, address).set(&apos;type&apos;, &apos;PUT&apos;);</pre></li><li class='line nomessage'><span class='gutter'>511</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if(body) { req.set(&apos;body&apos;, body) ; }</pre></li><li class='line nomessage'><span class='gutter'>512</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return req ;</pre></li><li class='line nomessage'><span class='gutter'>513</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>514</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>515</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>516</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Helper method for quickly setting up a PATCH request.</pre></li><li class='line nomessage'><span class='gutter'>517</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>518</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {String} address url of request</pre></li><li class='line nomessage'><span class='gutter'>519</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {String} body</pre></li><li class='line nomessage'><span class='gutter'>520</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {SC.Request} receiver</pre></li><li class='line nomessage'><span class='gutter'>521</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>522</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  patchUrl: function(address, body) {</pre></li><li class='line nomessage'><span class='gutter'>523</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    var req = this.create().set(&apos;address&apos;, address).set(&apos;type&apos;, &apos;PATCH&apos;);</pre></li><li class='line nomessage'><span class='gutter'>524</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if(body) { req.set(&apos;body&apos;, body) ; }</pre></li><li class='line nomessage'><span class='gutter'>525</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return req ;</pre></li><li class='line nomessage'><span class='gutter'>526</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  }</pre></li><li class='line nomessage'><span class='gutter'>527</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>528</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>});</pre></li><li class='line nomessage'><span class='gutter'>529</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>530</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>/**</pre></li><li class='line nomessage'><span class='gutter'>531</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  @class</pre></li><li class='line nomessage'><span class='gutter'>532</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>533</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  The request manager coordinates all of the active XHR requests. It will</pre></li><li class='line nomessage'><span class='gutter'>534</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  only allow a certain number of requests to be active at a time; queuing</pre></li><li class='line nomessage'><span class='gutter'>535</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  any others. This allows you more precise control over which requests load</pre></li><li class='line nomessage'><span class='gutter'>536</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  in which order.</pre></li><li class='line nomessage'><span class='gutter'>537</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>538</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  @since SproutCore 1.0</pre></li><li class='line nomessage'><span class='gutter'>539</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>*/</pre></li><li class='line nomessage'><span class='gutter'>540</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>SC.Request.manager = SC.Object.create(</pre></li><li class='line'><span class='gutter'>541</span><ul class='messages'><li class='warning'>Line has both code and comments. This is usually a sign that you need to explain a complex piece of code.</li></ul><pre class='code'>/** @scope SC.Request.manager */{</pre></li><li class='line nomessage'><span class='gutter'>542</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>543</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>544</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Maximum number of concurrent requests allowed. 6 for all browsers.</pre></li><li class='line nomessage'><span class='gutter'>545</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    </pre></li><li class='line nomessage'><span class='gutter'>546</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @type Number</pre></li><li class='line nomessage'><span class='gutter'>547</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @default 6</pre></li><li class='line nomessage'><span class='gutter'>548</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>549</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  maxRequests: 6,</pre></li><li class='line nomessage'><span class='gutter'>550</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>551</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>552</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Current requests that are inflight.</pre></li><li class='line nomessage'><span class='gutter'>553</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>554</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @type Array</pre></li><li class='line nomessage'><span class='gutter'>555</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @default []</pre></li><li class='line nomessage'><span class='gutter'>556</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>557</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  inflight: [],</pre></li><li class='line nomessage'><span class='gutter'>558</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>559</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>560</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Requests that are pending and have not been started yet.</pre></li><li class='line nomessage'><span class='gutter'>561</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>562</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @type Array</pre></li><li class='line nomessage'><span class='gutter'>563</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @default []</pre></li><li class='line nomessage'><span class='gutter'>564</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>565</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  pending: [],</pre></li><li class='line nomessage'><span class='gutter'>566</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>567</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>568</span><ul class='messages'><li class='warning'>You have 3 subsequent lines of comments in a row. Are you trying to explain something complex?</li><li class='warning'>You are using some kind of separator characters in your comment, probably in an attempt to separate some complex code ... why not making it simpler in the first place?</li></ul><pre class='code'>  // ..........................................................</pre></li><li class='line nomessage'><span class='gutter'>569</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  // METHODS</pre></li><li class='line nomessage'><span class='gutter'>570</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  // </pre></li><li class='line nomessage'><span class='gutter'>571</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  </pre></li><li class='line'><span class='gutter'>572</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>573</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Invoked by the send() method on a request. This will create a new low-</pre></li><li class='line nomessage'><span class='gutter'>574</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    level transport object and queue it if needed.</pre></li><li class='line nomessage'><span class='gutter'>575</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    </pre></li><li class='line nomessage'><span class='gutter'>576</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @param {SC.Request} request the request to send</pre></li><li class='line nomessage'><span class='gutter'>577</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {SC.Object} response object</pre></li><li class='line nomessage'><span class='gutter'>578</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line'><span class='gutter'>579</span><ul class='messages'><li class='error'>There are more than 30% of comments in function sendRequest (40.0%). Make the code simpler.</li></ul><pre class='code'>  sendRequest: function(request) {</pre></li><li class='line nomessage'><span class='gutter'>580</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (!request) { return null; }</pre></li><li class='line nomessage'><span class='gutter'>581</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>582</span><ul class='messages'><li class='warning'>You have 3 subsequent lines of comments in a row. Are you trying to explain something complex?</li><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>    // create low-level transport.  copy all critical data for request over</pre></li><li class='line nomessage'><span class='gutter'>583</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    // so that if the request has been reconfigured the transport will still</pre></li><li class='line nomessage'><span class='gutter'>584</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    // work.</pre></li><li class='line nomessage'><span class='gutter'>585</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    var response = request.get(&apos;responseClass&apos;).create({ request: request });</pre></li><li class='line nomessage'><span class='gutter'>586</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>587</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    // add to pending queue</pre></li><li class='line nomessage'><span class='gutter'>588</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    this.get(&apos;pending&apos;).pushObject(response);</pre></li><li class='line nomessage'><span class='gutter'>589</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    this.fireRequestIfNeeded();</pre></li><li class='line nomessage'><span class='gutter'>590</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>591</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return response;</pre></li><li class='line nomessage'><span class='gutter'>592</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>593</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>594</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /** </pre></li><li class='line nomessage'><span class='gutter'>595</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Cancels a specific request. If the request is pending it will simply</pre></li><li class='line nomessage'><span class='gutter'>596</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    be removed. Otherwise it will actually be cancelled.</pre></li><li class='line nomessage'><span class='gutter'>597</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>598</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>    @param {Object} response a response object</pre></li><li class='line nomessage'><span class='gutter'>599</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {Boolean} YES if cancelled</pre></li><li class='line nomessage'><span class='gutter'>600</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line'><span class='gutter'>601</span><ul class='messages'><li class='warning'>Function cancel returns more than 2 values (3).</li></ul><pre class='code'>  cancel: function(response) {</pre></li><li class='line nomessage'><span class='gutter'>602</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    var pending = this.get(&apos;pending&apos;),</pre></li><li class='line nomessage'><span class='gutter'>603</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        inflight = this.get(&apos;inflight&apos;),</pre></li><li class='line nomessage'><span class='gutter'>604</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        idx;</pre></li><li class='line nomessage'><span class='gutter'>605</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>606</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (pending.indexOf(response) &gt;= 0) {</pre></li><li class='line nomessage'><span class='gutter'>607</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      this.propertyWillChange(&apos;pending&apos;);</pre></li><li class='line nomessage'><span class='gutter'>608</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      pending.removeObject(response);</pre></li><li class='line nomessage'><span class='gutter'>609</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      this.propertyDidChange(&apos;pending&apos;);</pre></li><li class='line nomessage'><span class='gutter'>610</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      return YES;</pre></li><li class='line nomessage'><span class='gutter'>611</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    } else if (inflight.indexOf(response) &gt;= 0) {</pre></li><li class='line nomessage'><span class='gutter'>612</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      response.cancel();</pre></li><li class='line nomessage'><span class='gutter'>613</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>614</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      inflight.removeObject(response);</pre></li><li class='line nomessage'><span class='gutter'>615</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      this.fireRequestIfNeeded();</pre></li><li class='line nomessage'><span class='gutter'>616</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      return YES;</pre></li><li class='line nomessage'><span class='gutter'>617</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    }</pre></li><li class='line nomessage'><span class='gutter'>618</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>619</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return NO;</pre></li><li class='line nomessage'><span class='gutter'>620</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>621</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>622</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>623</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Cancels all inflight and pending requests.</pre></li><li class='line nomessage'><span class='gutter'>624</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>625</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>    @returns {Boolean} YES if any items were cancelled.</pre></li><li class='line nomessage'><span class='gutter'>626</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>627</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  cancelAll: function() {</pre></li><li class='line nomessage'><span class='gutter'>628</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if (this.get(&apos;pending&apos;).length || this.get(&apos;inflight&apos;).length) {</pre></li><li class='line nomessage'><span class='gutter'>629</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      this.set(&apos;pending&apos;, []);</pre></li><li class='line nomessage'><span class='gutter'>630</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      this.get(&apos;inflight&apos;).forEach(function(r) { r.cancel(); });</pre></li><li class='line nomessage'><span class='gutter'>631</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      this.set(&apos;inflight&apos;, []);</pre></li><li class='line nomessage'><span class='gutter'>632</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      return YES;</pre></li><li class='line nomessage'><span class='gutter'>633</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    }</pre></li><li class='line nomessage'><span class='gutter'>634</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>635</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    return NO;</pre></li><li class='line nomessage'><span class='gutter'>636</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>637</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  </pre></li><li class='line nomessage'><span class='gutter'>638</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>639</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Checks the inflight queue. If there is an open slot, this will move a</pre></li><li class='line nomessage'><span class='gutter'>640</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    request from pending to inflight.</pre></li><li class='line nomessage'><span class='gutter'>641</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>642</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    @returns {Object} receiver</pre></li><li class='line nomessage'><span class='gutter'>643</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>644</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  fireRequestIfNeeded: function() {</pre></li><li class='line nomessage'><span class='gutter'>645</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    var pending = this.get(&apos;pending&apos;),</pre></li><li class='line nomessage'><span class='gutter'>646</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        inflight = this.get(&apos;inflight&apos;),</pre></li><li class='line nomessage'><span class='gutter'>647</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        max = this.get(&apos;maxRequests&apos;),</pre></li><li class='line nomessage'><span class='gutter'>648</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>        next;</pre></li><li class='line nomessage'><span class='gutter'>649</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>650</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    if ((pending.length&gt;0) &amp;&amp; (inflight.length&lt;max)) {</pre></li><li class='line nomessage'><span class='gutter'>651</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      next = pending.shiftObject();</pre></li><li class='line nomessage'><span class='gutter'>652</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      inflight.pushObject(next);</pre></li><li class='line nomessage'><span class='gutter'>653</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>      next.fire();</pre></li><li class='line nomessage'><span class='gutter'>654</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    }</pre></li><li class='line nomessage'><span class='gutter'>655</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  },</pre></li><li class='line nomessage'><span class='gutter'>656</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line'><span class='gutter'>657</span><ul class='messages'><li class='warning'>It seems this comment tries to explain a piece of code that has several responsibilities</li></ul><pre class='code'>  /**</pre></li><li class='line nomessage'><span class='gutter'>658</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    Called by a response/transport object when finishes running. Removes</pre></li><li class='line nomessage'><span class='gutter'>659</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    the transport from the queue and kicks off the next one.</pre></li><li class='line nomessage'><span class='gutter'>660</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  */</pre></li><li class='line nomessage'><span class='gutter'>661</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  transportDidClose: function(response) {</pre></li><li class='line nomessage'><span class='gutter'>662</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    this.get(&apos;inflight&apos;).removeObject(response);</pre></li><li class='line nomessage'><span class='gutter'>663</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>    this.fireRequestIfNeeded();</pre></li><li class='line nomessage'><span class='gutter'>664</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>  }</pre></li><li class='line nomessage'><span class='gutter'>665</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'></pre></li><li class='line nomessage'><span class='gutter'>666</span><ul class='messages'><li>&nbsp;</li></ul><pre class='code'>});</pre></li></ul></body></html>